
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Bruker formats &#8212; RosettaSciIO  documentation</title>
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom-styles.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Direct Electron EMD (DE5)" href="de5.html" />
    <link rel="prev" title="Blockfile" href="blockfile.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    <p class="title logo__title">RosettaSciIO</p>
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  Supported formats
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../interoperatibility.html">
  Interoperability
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/hyperspy/rosettasciio" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/hyperspy/rosettasciio" rel="noopener" target="_blank" title="RosettaSciIO"><img src="../" class="icon-link-image" alt="RosettaSciIO"/></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="blockfile.html">
   Blockfile
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Bruker formats
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="de5.html">
   Direct Electron EMD (DE5)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dens.html">
   DENSsolutions formats
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="digital_micrograph.html">
   Gatan Digital Micrograph
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="digitalsurf.html">
   DigitalSurf format (SUR &amp; PRO)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="edax.html">
   EDAX TEAM/Genesis (SPC, SPD)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="emd.html">
   Electron Microscopy Dataset (EMD)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="emi_ser.html">
   FEI TIA (SER &amp; EMI)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="empad.html">
   EMPAD format (XML &amp; RAW)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="hspy.html">
   HSpy - HyperSpy’s HDF5 Specification
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="image.html">
   Image formats
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="jeol.html">
   JEOL Analyst Station (ASW, …)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="mrc.html">
   MRC format
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="mrcz.html">
   MRCZ format
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="msa.html">
   EMSA/MSA format
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="netcdf.html">
   NetCDF (EELSlab) format
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="nexus.html">
   NeXus data format
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="panta_rhei.html">
   CEOS Panta Rhei (PRZ)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="phenom.html">
   Phenom ELID format
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="protochips.html">
   Protochips logfile
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ripple.html">
   Ripple format
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="semper.html">
   SEMPER binary format (UNF)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="tiff.html">
   Tagges image file format (TIFF)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="tvips.html">
   TVIPS format
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="usid.html">
   Universal Spectroscopy and Imaging Data (h5USID)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="zspy.html">
   ZSpy - HyperSpy’s Zarr Specification
  </a>
 </li>
</ul>

  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#bruker-composite-file-bcf">
   Bruker composite file (BCF)
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#extra-loading-arguments">
     Extra loading arguments
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#spx-xml-format">
   SPX (xml) format
  </a>
 </li>
</ul>

</nav>
    </div>
    
    <div class="toc-item">
      
    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <section id="bruker-formats">
<span id="bruker-format"></span><h1>Bruker formats<a class="headerlink" href="#bruker-formats" title="Permalink to this heading">#</a></h1>
<section id="bruker-composite-file-bcf">
<span id="bcf-format"></span><h2>Bruker composite file (BCF)<a class="headerlink" href="#bruker-composite-file-bcf" title="Permalink to this heading">#</a></h2>
<p>RosettaSciIO can read “hypermaps” saved with Bruker’s Esprit v1.x or v2.x in <code class="docutils literal notranslate"><span class="pre">.bcf</span></code>
hybrid (virtual file system/container with xml and binary data, optionally
compressed) format. Most <code class="docutils literal notranslate"><span class="pre">.bcf`</span></code> import functionality is implemented. Both
high-resolution 16-bit SEM images and hyperspectral EDX data can be retrieved
simultaneously.</p>
<p>BCF can look as all inclusive format, however it does not save some key EDX
parameters: any of dead/live/real times, FWHM at Mn_Ka line. However, real time
for whole map is calculated from pixelAverage, lineAverage, pixelTime,
lineCounter and map height parameters.</p>
<p>Note that Bruker Esprit uses a similar format for EBSD data, but it is not
currently supported by RosettaSciIO.</p>
<section id="extra-loading-arguments">
<h3>Extra loading arguments<a class="headerlink" href="#extra-loading-arguments" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">select_type</span></code> : one of (None, ‘spectrum’, ‘image’). If specified, only the
corresponding type of data, either spectrum or image, is returned.
By default (None), all data are loaded.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index</span></code> : one of (None, int, “all”). Allow to select the index of the dataset
in the <code class="docutils literal notranslate"><span class="pre">.bcf</span></code> file, which can contains several datasets. Default None value
result in loading the first dataset. When set to ‘all’, all available datasets
will be loaded and returned as separate signals.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">downsample</span></code> : the downsample ratio of hyperspectral array (height and width
only), can be integer &gt;=1, where ‘1’ results in no downsampling (default 1).
The underlying method of downsampling is unchangeable: sum. Differently than
<code class="docutils literal notranslate"><span class="pre">block_reduce</span></code> from skimage.measure it is memory efficient (does not creates
intermediate arrays, works inplace).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cutoff_at_kV</span></code> : if set (can be None, int, float (kV), one of ‘zealous’
or ‘auto’) can be used either to crop or enlarge energy (or number of
channels) range at max values. It can be used to conserve memory or enlarge
the range if needed to mach the size of other file. Default value is None
(which does not influence size). Numerical values should be in kV.
‘zealous’ truncates to the last non zero channel (this option
should not be used for stacks, as low beam current EDS can have different
last non zero channel per slice). ‘auto’ truncates channels to SEM/TEM
acceleration voltage or energy at last channel, depending which is smaller.
In case the hv info is not there or hv is off (0 kV) then it fallbacks to
full channel range.</p></li>
</ul>
<p>Example of loading reduced (downsampled, and with energy range cropped)
“spectrum only” data from <code class="docutils literal notranslate"><span class="pre">.bcf</span></code> (original shape: 80keV EDS range (4096 channels),
100x75 pixels; SEM acceleration voltage: 20kV):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hs</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;sample80kv.bcf&quot;</span><span class="p">,</span> <span class="n">select_type</span><span class="o">=</span><span class="s1">&#39;spectrum&#39;</span><span class="p">,</span> <span class="n">downsample</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">cutoff_at_kV</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="go">&lt;EDSSEMSpectrum, title: EDX, dimensions: (50, 38|595)&gt;</span>
</pre></div>
</div>
<p>load the same file with limiting array size to SEM acceleration voltage:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hs</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;sample80kv.bcf&quot;</span><span class="p">,</span> <span class="n">cutoff_at_kV</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">)</span>
<span class="go">[&lt;Signal2D, title: BSE, dimensions: (|100, 75)&gt;,</span>
<span class="go">&lt;Signal2D, title: SE, dimensions: (|100, 75)&gt;,</span>
<span class="go">&lt;EDSSEMSpectrum, title: EDX, dimensions: (100, 75|1024)&gt;]</span>
</pre></div>
</div>
<p>The loaded array energy dimension can by forced to be larger than the data
recorded by setting the ‘cutoff_at_kV’ kwarg to higher value:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hs</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;sample80kv.bcf&quot;</span><span class="p">,</span> <span class="n">cutoff_at_kV</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="go">[&lt;Signal2D, title: BSE, dimensions: (|100, 75)&gt;,</span>
<span class="go">&lt;Signal2D, title: SE, dimensions: (|100, 75)&gt;,</span>
<span class="go">&lt;EDSSEMSpectrum, title: EDX, dimensions: (100, 75|3072)&gt;]</span>
</pre></div>
</div>
<p>loading without setting cutoff_at_kV value would return data with all 4096
channels. Note that setting downsample to &gt;1 currently locks out using SEM
images for navigation in the plotting.</p>
</section>
</section>
<section id="spx-xml-format">
<span id="spx-format"></span><h2>SPX (xml) format<a class="headerlink" href="#spx-xml-format" title="Permalink to this heading">#</a></h2>
<p>RosettaSciIO can read Bruker’s <code class="docutils literal notranslate"><span class="pre">.spx</span></code> format (single spectra format based on XML).
The format contains extensive list of details and parameters of EDS analyses
which in <a class="reference external" href="https://hyperspy.org">HyperSpy</a> are mapped to <code class="docutils literal notranslate"><span class="pre">metadata</span></code> and
<code class="docutils literal notranslate"><span class="pre">original_metadata</span></code> dictionaries.</p>
</section>
</section>


              </article>
              

              
              <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="blockfile.html" title="previous page">
      <i class="fas fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">Blockfile</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="de5.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">Direct Electron EMD (DE5)</p>
  </div>
  <i class="fas fa-angle-right"></i>
  </a>
</div>
              </footer>
              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright 2022, HyperSpy Developers.<br>
</p>
  </div>
  
  <div class="footer-item">
    <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.0.2.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>